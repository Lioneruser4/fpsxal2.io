<!DOCTYPE html>

<html lang="tr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
<meta name="theme-color" content="#0d0d1a"/>
<title>SAVAÅ OYUNU</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html,body{width:100%;height:100%;overflow:hidden;background:#0d0d1a;font-family:'Segoe UI',Arial,sans-serif;color:#fff;user-select:none;-webkit-user-select:none;touch-action:none}

/* â”€â”€ Ekranlar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.screen{position:fixed;inset:0;display:none;flex-direction:column;align-items:center;justify-content:center;z-index:10}
.screen.active{display:flex}

/* â”€â”€ ANA MENÃœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#main-menu{background:radial-gradient(ellipse at center,#1a1a3e 0%,#0d0d1a 70%)}

.logo{
font-size:clamp(32px,9vw,62px);
font-weight:900;letter-spacing:4px;text-transform:uppercase;
background:linear-gradient(135deg,#e74c3c 0%,#f39c12 50%,#e74c3c 100%);
-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
filter:drop-shadow(0 0 24px rgba(231,76,60,0.55));
margin-bottom:6px;
}
.logo-sub{font-size:clamp(11px,3vw,15px);color:#8080a0;letter-spacing:7px;text-transform:uppercase;margin-bottom:36px}

.player-card{
background:rgba(255,255,255,0.06);
border:1px solid rgba(255,255,255,0.13);
border-radius:14px;padding:14px 28px;margin-bottom:32px;
text-align:center;backdrop-filter:blur(8px);
min-width:220px;
}
.player-card .pname{font-size:20px;font-weight:800;color:#FFD700}
.player-card .psub{font-size:11px;color:#666;margin-top:3px}

.menu-btns{display:flex;flex-direction:column;gap:13px;width:270px}

.mbtn{
padding:15px 24px;border-radius:13px;border:none;
font-size:16px;font-weight:800;letter-spacing:2px;text-transform:uppercase;
cursor:pointer;transition:transform .1s,box-shadow .15s;position:relative;overflow:hidden;
}
.mbtn::after{content:â€™â€™;position:absolute;inset:0;background:linear-gradient(180deg,rgba(255,255,255,0.13) 0%,transparent 100%);pointer-events:none}
.mbtn:active{transform:scale(0.95)}

.mbtn-red{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;box-shadow:0 6px 22px rgba(231,76,60,0.42)}
.mbtn-blue{background:linear-gradient(135deg,#2980b9,#1a5276);color:#fff;box-shadow:0 6px 22px rgba(41,128,185,0.38)}
.mbtn-ghost{background:transparent;color:#888;border:2px solid rgba(255,255,255,0.15)}
.mbtn-ghost:hover{border-color:rgba(255,255,255,0.35);color:#ccc}

.divider{width:100%;height:1px;background:rgba(255,255,255,0.07);margin:2px 0}

.tag-row{display:flex;gap:16px;margin-top:26px;font-size:12px;color:#444}
.tag-row span{display:flex;align-items:center;gap:4px}

/* â”€â”€ ODALAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#rooms-screen,#create-screen{
background:rgba(10,10,22,0.98);padding:20px;overflow-y:auto;
align-items:flex-start;justify-content:flex-start;
}
.screen-hdr{display:flex;align-items:center;gap:14px;margin-bottom:20px;width:100%;max-width:580px}
.screen-hdr h2{flex:1;font-size:20px;font-weight:800}
.back-btn{background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.13);color:#ccc;padding:8px 16px;border-radius:8px;cursor:pointer;font-size:13px;transition:background .2s}
.back-btn:hover{background:rgba(255,255,255,0.14)}
.refresh-btn{background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.13);color:#ccc;padding:8px 14px;border-radius:8px;cursor:pointer;font-size:15px}

#rooms-list{width:100%;max-width:580px;display:flex;flex-direction:column;gap:9px}
.room-item{background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.09);border-radius:11px;padding:13px 16px;display:flex;align-items:center;justify-content:space-between;transition:background .18s}
.room-item:hover{background:rgba(255,255,255,0.09)}
.room-info{display:flex;flex-direction:column;gap:3px}
.room-name{font-weight:700;font-size:13px}
.room-teams{font-size:12px;color:#999}
.room-join-btn{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;border:none;padding:9px 18px;border-radius:8px;font-weight:700;cursor:pointer;font-size:12px;transition:transform .1s}
.room-join-btn:disabled{background:#3a3a3a;color:#666;cursor:not-allowed}
.room-join-btn:not(:disabled):active{transform:scale(0.93)}
.no-rooms{color:#555;font-size:14px;text-align:center;padding:40px;width:100%}

/* â”€â”€ ODA OLUÅTUR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.create-form{display:flex;flex-direction:column;gap:14px;width:100%;max-width:380px}
.flabel{font-size:12px;color:#888;font-weight:600;margin-bottom:3px}
.fselect{width:100%;padding:11px 14px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.13);border-radius:9px;color:#fff;font-size:14px;outline:none}

/* â”€â”€ OYUN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#game-screen{background:#000;position:relative}
#game-canvas{position:absolute;inset:0;width:100%;height:100%;display:block}

/* â”€â”€ HUD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#hud{position:absolute;inset:0;pointer-events:none;z-index:20}

#top-hud{position:absolute;top:0;left:0;right:0;display:flex;justify-content:space-between;padding:10px 12px;pointer-events:none}
.hpill{background:rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.1);border-radius:9px;padding:7px 12px;font-size:13px;font-weight:700;display:flex;flex-direction:column;gap:2px;backdrop-filter:blur(4px)}
#team-label{font-size:14px;font-weight:900}
#room-label{font-size:11px;color:#999}
#conn-status{font-size:10px}
.kd-hud{text-align:right}
.kd-hud small{font-size:10px;color:#888;display:block}
.kd-val{font-size:16px;font-weight:900;color:#FFD700}

/* can barÄ± */
#hp-wrap{position:absolute;left:50%;transform:translateX(-50%);bottom:140px;display:flex;flex-direction:column;align-items:center;gap:4px;pointer-events:none}
#hp-bar{width:170px;height:9px;background:rgba(0,0,0,0.55);border-radius:5px;overflow:hidden;border:1px solid rgba(255,255,255,0.15)}
#hp-bar-inner{height:100%;width:100%;background:#27ae60;border-radius:5px;transition:width .25s,background .25s}
#hp-text{font-size:12px;font-weight:700;color:#fff;text-shadow:1px 1px 2px #000}

#minimap{position:absolute;top:12px;right:12px;width:130px;height:130px;border-radius:9px;border:2px solid rgba(255,255,255,0.18);background:rgba(0,0,0,0.35);pointer-events:none;z-index:25;image-rendering:pixelated}
#mm-label{position:absolute;top:147px;right:12px;font-size:9px;color:rgba(255,255,255,0.4);pointer-events:none;z-index:25;text-align:right}

/* hasar popup */
#dmg-popup{position:absolute;top:38%;left:50%;transform:translate(-50%,-50%) scale(0);font-size:26px;font-weight:900;color:#e74c3c;text-shadow:0 0 10px rgba(231,76,60,.7),2px 2px 0 #000;pointer-events:none;opacity:0;z-index:30}
#dmg-popup.show{animation:dmgAnim .8s ease forwards}
@keyframes dmgAnim{0%{transform:translate(-50%,-60%) scale(1.2);opacity:1}100%{transform:translate(-50%,-110%) scale(.8);opacity:0}}

.notif{position:absolute;top:78px;left:50%;transform:translateX(-50%) translateY(-16px);background:rgba(0,0,0,0.72);border:1px solid rgba(255,255,255,0.13);border-radius:9px;padding:9px 18px;font-size:13px;font-weight:700;opacity:0;transition:opacity .3s,transform .3s;pointer-events:none;z-index:30;backdrop-filter:blur(4px);white-space:nowrap}
.notif.show{opacity:1;transform:translateX(-50%) translateY(0)}
.notif.red{color:#e74c3c;border-color:rgba(231,76,60,.35)}
.notif.green{color:#2ecc71;border-color:rgba(46,204,113,.35)}
.notif.blue{color:#3498db;border-color:rgba(52,152,219,.35)}
.notif.neutral{color:#ccc}

#kb-hint{position:absolute;bottom:12px;left:50%;transform:translateX(-50%);font-size:10px;color:rgba(255,255,255,0.28);pointer-events:none;z-index:20;white-space:nowrap}

/* â”€â”€ Mobil kontroller â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#mob-ctrl{position:absolute;bottom:0;left:0;right:0;height:185px;display:flex;align-items:center;justify-content:space-between;padding:8px 18px 22px;pointer-events:none;z-index:50}

.joy-wrap{display:flex;flex-direction:column;align-items:center;gap:3px;pointer-events:all}
.ctrl-lbl{font-size:9px;color:rgba(255,255,255,0.38);text-align:center}

#joystick{width:108px;height:108px;background:rgba(255,255,255,0.07);border:2px solid rgba(255,255,255,0.18);border-radius:50%;position:relative;pointer-events:all;backdrop-filter:blur(2px)}
#joy-knob{width:44px;height:44px;background:rgba(255,255,255,0.32);border:2px solid rgba(255,255,255,0.45);border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:0 0 10px rgba(255,255,255,0.12)}

#center-col{display:flex;flex-direction:column;align-items:center;gap:10px;pointer-events:all}
#jump-btn{width:62px;height:62px;background:rgba(46,204,113,0.22);border:2px solid rgba(46,204,113,0.45);border-radius:50%;font-size:24px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:900;transition:transform .1s,background .1s;backdrop-filter:blur(2px);pointer-events:all}
#jump-btn:active{transform:scale(0.88);background:rgba(46,204,113,0.48)}

#aim-joystick{width:88px;height:88px;background:rgba(255,165,0,0.07);border:2px solid rgba(255,165,0,0.22);border-radius:50%;position:relative;pointer-events:all;backdrop-filter:blur(2px)}
#aim-knob{width:34px;height:34px;background:rgba(255,165,0,0.32);border:2px solid rgba(255,165,0,0.55);border-radius:50%;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}

#shoot-btn{width:78px;height:78px;background:radial-gradient(circle,rgba(231,76,60,.6),rgba(192,57,43,.85));border:3px solid rgba(231,76,60,.8);border-radius:50%;font-size:26px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-weight:900;transition:transform .08s,box-shadow .08s;pointer-events:all;box-shadow:0 0 18px rgba(231,76,60,.38);backdrop-filter:blur(2px)}
#shoot-btn:active{transform:scale(0.87);box-shadow:0 0 7px rgba(231,76,60,.28)}

/* MasaÃ¼stÃ¼: mobil kontrolleri gizle */
@media (hover:hover) and (pointer:fine){#mob-ctrl{display:none}#kb-hint{display:block}#hp-wrap{bottom:18px}}
@media (hover:none),(pointer:coarse){#kb-hint{display:none}}

/* â”€â”€ Loading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
#loading{position:fixed;inset:0;background:#0d0d1a;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:999;gap:14px;transition:opacity .5s}
.ring{width:56px;height:56px;border-radius:50%;border:4px solid rgba(231,76,60,.2);border-top-color:#e74c3c;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-txt{color:#888;font-size:13px}
</style>

</head>
<body>

<!-- Loading -->

<div id="loading">
  <div class="ring"></div>
  <div class="loading-txt" id="load-txt">Sunucuya baÄŸlanÄ±yor...</div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• ANA MENÃœ â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="main-menu" class="screen">
  <div class="logo">âš”ï¸ SAVAÅ</div>
  <div class="logo-sub">Tactical FPS Â· Multiplayer</div>

  <div class="player-card">
    <div class="pname" id="player-name-display">YÃ¼kleniyor...</div>
    <div class="psub">Oyuncu</div>
  </div>

  <div class="menu-btns">
    <button class="mbtn mbtn-red" id="btn-find-game">ğŸ® OYUN BUL</button>
    <div class="divider"></div>
    <button class="mbtn mbtn-blue" id="btn-rooms">ğŸ  ODALAR</button>
    <button class="mbtn mbtn-ghost" id="btn-create-room">â• ODA OLUÅTUR</button>
  </div>

  <div class="tag-row">
    <span>ğŸ”´ KÄ±rmÄ±zÄ± TakÄ±m</span>
    <span style="color:#555">VS</span>
    <span>ğŸ”µ Mavi TakÄ±m</span>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• ODALAR â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="rooms-screen" class="screen">
  <div class="screen-hdr">
    <button class="back-btn" id="btn-back-rooms">â† Geri</button>
    <h2>ğŸ  Odalar</h2>
    <button class="refresh-btn" onclick="socket.emit('getRooms')">ğŸ”„</button>
  </div>
  <div id="rooms-list"><div class="no-rooms">YÃ¼kleniyor...</div></div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• ODA OLUÅTUR â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="create-screen" class="screen">
  <div class="screen-hdr">
    <button class="back-btn" id="btn-back-create">â† Geri</button>
    <h2>â• Oda OluÅŸtur</h2>
  </div>
  <div class="create-form">
    <div>
      <div class="flabel">TakÄ±m boyutu</div>
      <select class="fselect" id="team-size">
        <option value="5">5v5</option>
        <option value="10" selected>10v10</option>
      </select>
    </div>
    <div>
      <div class="flabel">Oyun modu</div>
      <select class="fselect">
        <option>TakÄ±m SavaÅŸÄ±</option>
        <option>Deathmatch</option>
      </select>
    </div>
    <button class="mbtn mbtn-red" id="btn-create-room-confirm" style="margin-top:8px">OLUÅTUR &amp; GÄ°R</button>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• OYUN â•â•â•â•â•â•â•â•â•â•â•â• -->

<div id="game-screen" class="screen">
  <canvas id="game-canvas"></canvas>
  <canvas id="minimap" width="130" height="130"></canvas>
  <div id="mm-label">HARÄ°TA</div>

  <div id="hud">
    <!-- Ãœst -->
    <div id="top-hud">
      <div class="hpill">
        <span id="team-label">â€” TAKIM â€”</span>
        <span id="room-label">BaÄŸlanÄ±yor...</span>
        <span id="conn-status">ğŸŸ¡ BaÄŸlanÄ±yor</span>
      </div>
      <div class="hpill kd-hud">
        <small>Ã–ldÃ¼rme / Ã–lÃ¼m</small>
        <span><span id="kills-val" class="kd-val">0</span> / <span id="deaths-val">0</span></span>
      </div>
    </div>

```
<!-- Can -->
<div id="hp-wrap">
  <div id="hp-bar"><div id="hp-bar-inner"></div></div>
  <div id="hp-text">â¤ï¸ <span id="hp-val">100</span></div>
</div>

<div id="dmg-popup"></div>
<div id="notif" class="notif"></div>
<div id="kb-hint">WASD: Hareket &nbsp;|&nbsp; Mouse: NiÅŸan &nbsp;|&nbsp; TÄ±k / F: AteÅŸ &nbsp;|&nbsp; Space: ZÄ±pla</div>
```

  </div>

  <!-- Mobil -->

  <div id="mob-ctrl">
    <div class="joy-wrap">
      <div id="joystick"><div id="joy-knob"></div></div>
      <div class="ctrl-lbl">HAREKET</div>
    </div>

```
<div id="center-col">
  <div class="joy-wrap">
    <div id="jump-btn">â†‘</div>
    <div class="ctrl-lbl">ZIPLA</div>
  </div>
</div>

<div class="joy-wrap">
  <div id="aim-joystick"><div id="aim-knob"></div></div>
  <div class="ctrl-lbl">NÄ°ÅAN</div>
</div>

<div class="joy-wrap">
  <div id="shoot-btn">ğŸ”«</div>
  <div class="ctrl-lbl">ATEÅ</div>
</div>
```

  </div>
</div>

<!-- Scripts -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.min.js"></script>

<script src="game.js"></script>

<script>
  // Loading kaldÄ±r
  window.addEventListener('DOMContentLoaded',()=>{
    setTimeout(()=>{
      const ov=document.getElementById('loading');
      if(ov){ov.style.opacity='0';setTimeout(()=>ov.remove(),500);}
      document.getElementById('main-menu').classList.add('active');
    },1000);
  });
  document.addEventListener('contextmenu',e=>e.preventDefault());
</script>

</body>
</html>
